Jef=function(){"use strict";var t=function(t,n){n||(n=".");for(var e="",i=0;i<t.length;i++)0!==i&&(e+=n),e+=t[i];return e},n=function(n,e){this.isRoot=!1,e.path===n.path&&(this.isRoot=!0),this.level=n.pathArray.length-e.pathArray.length,this.pathArray=n.pathArray.slice(e.pathArray.length,n.pathArray.length),this.path=t(this.pathArray)},e=function(){this.key=null,this.value=null,this.parent=null,this.isRoot=null,this.pathArray=[],this.path=null,this.isLeaf=null,this.isCircular=null,this.level=null,this.count=0,this.isEmpty=function(){return 0===this.count},this.get=function(t){var n;return n=this.isRoot?t:this.path+"."+t,this._nodeHash[r+"."+n]},this.filter=function(t){var e=[];for(var i in this._nodeHash)if(0===i.indexOf(this._internalPath)){var r=this._nodeHash[i],a=t(r,new n(r,this));void 0!==a&&e.push(a)}return e},this.validate=function(t){var n=!0;return this.filter(function(e,i){var r=t(e,i);r===!1&&(n=!1)}),n},this.remove=function(t){var n=this.filter(function(n,e){return t(n,e)}),i=!0,r=function(t){if(t instanceof Array)t.forEach(function(t){r(t)});else if(t instanceof e)if(t.isRoot)console.log("Root node cannot be deleted."),i=!1;else if("array"===t.parent.type()){var n=t.parent.value,a=n.indexOf(t.value);n.splice(a,1)}else delete t.parent.value[t.key];else console.log("Only JefNode objects must be returned from delete callback."),i=!1};return r(n),i},this.has=function(t){if(!this.value)return!1;if(t instanceof RegExp){if("object"===this.type()){for(var n in this.value)if(t.test(n))return!0;return!1}return!1}return void 0!==this.value[t]?!0:!1},this.getType=function(){return this.type()},this.type=function(){return{}.toString.call(this.value).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},this._nodeHash=null,this._internalPath=null,this._debugNodeHash=function(){for(var t in this._nodeHash)0===t.indexOf(this._internalPath)&&console.log(t)}},i=function(t,n){var e=[],i=function(t,r,a,s,h,o){var l=r instanceof Array,u="object"==typeof r&&!l,f=null===r,c=u&&!f||l,v=!c,p=!1;if(-1!==e.indexOf(r)?p=!0:e.push(r),n(t,r,h,a,o,s,v,p),!p){var y,d;if(u)for(y in r)d=h.concat([y]),i(y,r[y],r,!1,d,o+1);if(l)for(var g=0;g<r.length;g++)y=""+g,d=h.concat([y]),i(y,r[g],r,!1,d,o+1)}};i(void 0,t,void 0,!0,[],0)},r="$root_4285190851",a=function(n){return this._traverse=function(n){var a={};return i(n,function(n,i,s,h,o,l,u,f){var c=new e;c._nodeHash=a,c.pathArray=s,c.path=t(c.pathArray),c.key=n,c.value=i,c.level=o,c.isRoot=l,c.isLeaf=u,c.isCircular=f,c._internalPath=0===c.level?r:r+"."+t(c.pathArray),c.isRoot?a[r]=c:a[r+"."+c.path]=c;var v,p=c.pathArray.slice(0,c.pathArray.length-1);v=0===p.length?a[r]:a[r+"."+t(p)],v&&(c.parent=v),c.isRoot||c.parent.count++}),a},this._build=function(t){var n=this._traverse(t);return n[r]},this._build(n)};return a}();
