Jef=function(){"use strict";var t=function(t,e){e||(e=".");for(var n="",i=0;i<t.length;i++)0!==i&&(n+=e),n+=t[i];return n},e=function(e,n){this.isRoot=!1,n.path===e.path&&(this.isRoot=!0),this.level=e.pathArray.length-n.pathArray.length,this.pathArray=e.pathArray.slice(n.pathArray.length,e.pathArray.length),this.path=t(this.pathArray)},n=function(){this.key=null,this.value=null,this.parent=null,this.isRoot=null,this.pathArray=[],this.path=null,this.isLeaf=null,this.isCircular=null,this.level=null,this.get=function(t){var e;return e=this.isRoot?t:this.path+"."+t,this._nodeHash[r+"."+e]},this.filter=function(t){var n=[];for(var i in this._nodeHash)if(0===i.indexOf(this._internalPath)){var r=this._nodeHash[i],a=t(r,new e(r,this));void 0!==a&&n.push(a)}return n},this.validate=function(t){var e=!0;return this.filter(function(n,i){var r=t(n,i);r===!1&&(e=!1)}),e},this.remove=function(t){var e=this.filter(function(e,n){return t(e,n)}),i=!0,r=function(t){if(t instanceof Array)t.forEach(function(t){r(t)});else if(t instanceof n)if(t.isRoot)console.log("Root node cannot be deleted."),i=!1;else if("array"===t.parent.getType()){var e=t.parent.value,a=e.indexOf(t.value);e.splice(a,1)}else delete t.parent.value[t.key];else console.log("Only JefNode objects must be returned from delete callback."),i=!1};return r(e),i},this.has=function(t){if(!this.value)return!1;if(t instanceof RegExp){if("object"===this.getType()){for(var e in this.value)if(t.test(e))return!0;return!1}return!1}return void 0!==this.value[t]?!0:!1},this.getType=function(){return{}.toString.call(this.value).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},this._nodeHash=null,this._internalPath=null,this._debugNodeHash=function(){for(var t in this._nodeHash)0===t.indexOf(this._internalPath)&&console.log(t)}},i=function(t,e){var n=[],i=function(t,r,a,h,s,o){var l=r instanceof Array,u="object"==typeof r&&!l,f=null===r,c=u&&!f||l,v=!c,p=!1;if(-1!==n.indexOf(r)?p=!0:n.push(r),e(t,r,s,a,o,h,v,p),!p){var d,y;if(u)for(d in r)y=s.concat([d]),i(d,r[d],r,!1,y,o+1);if(l)for(var g=0;g<r.length;g++)d=""+g,y=s.concat([d]),i(d,r[g],r,!1,y,o+1)}};i(void 0,t,void 0,!0,[],0)},r="$root_4285190851",a=function(e){return this._traverse=function(e){var a={};return i(e,function(e,i,h,s,o,l,u,f){var c=new n;c._nodeHash=a,c.pathArray=h,c.path=t(c.pathArray),c.key=e,c.value=i,c.level=o,c.isRoot=l,c.isLeaf=u,c.isCircular=f,c._internalPath=0===c.level?r:r+"."+t(c.pathArray),c.isRoot?a[r]=c:a[r+"."+c.path]=c;var v,p=c.pathArray.slice(0,c.pathArray.length-1);v=0===p.length?a[r]:a[r+"."+t(p)],v&&(c.parent=v)}),a},this._build=function(t){var e=this._traverse(t);return e[r]},this._build(e)};return a}();
